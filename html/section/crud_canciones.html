<?php
    session_start();

    if (!isset($_SESSION["nombre_artistico"])) {
        header("Location: login.html");
        exit("Página Privada");
    }
?>


<?php 
    require('../../db_config.php');
    include('response.php');
    $newObj = new cancion();
    $songs = $newObj->getCancion();
?>

<?php include('../template/navbar_artista.html');?>

<div class="container">
    <div class="row">
        <div class="col-md-3">
            <div class="card">
                <div class="card-header">
                    Agregar canción
                </div>
                <div class="card-body">
                    <form method="POST" enctype="multipart/form-data">
                        <div class="mb-3">
                            <label for="txtNombre">ID álbum al que pertenece la canción</label>
                            <input type="text" class="form-control" name="txtNombre" id="txtNombre" placeholder="ID">
                        </div>
                        <div class="mb-3">
                            <label for="txtNombre">Nombre de la canción</label>
                            <input type="text" class="form-control" name="txtNombre" id="txtNombre"
                                placeholder="Nombre">
                        </div>
                        <div class="form-group">
                            <label for="exampleFormControlTextarea1">Letra de la canción</label>
                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="txtNombre">Fecha de composición</label>
                            <form>
                                <input class="form-control" type="date" placeholder="Seleccionar fecha de composición">
                            </form>
                        </div>
                        <div class="btn-group" role="group" aria-label="">
                            <button type="button" name="agregar" class="btn btn-success">Agregar</button>
                            <button type="button" name="cancelar" class="btn btn-danger">Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-md-2">

        </div>

        <div class="col-sm-6" style="padding-top:50px;">
            <div class="well">
                <h2>Tabla de Canciones</h2>
            </div>
            <table id="songs_grid" class="table" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Artista(s)</th>
                        <th>Álbum</th>

                    </tr>
                </thead>
                <tbody>
                    <?php foreach($songs as $key => $song) :?>
                    <tr>
                        <td>
                            <?php echo $song['nombre'] ?>
                        </td>
                        <td>
                            <?php echo $song['nombre_artistico'] ?>
                        </td>
                        <td>
                            <?php echo $song['nombre_album'] ?>
                        </td>
                        <td><button
                                onclick="location.href='perfil_cancion.php?nombre_cancion=<?php echo $song['nombre']?>&nombre_artista=<?php echo $song['nombre_artistico']?>&fecha_composicion=<?php echo $song['fecha_composicion']?>&album=<?php echo $song['nombre_album']?>&letra=<?php echo $song['letra']?>'">Perfil</button>
                        </td>
                    </tr>

                    <?php endforeach;?>
                </tbody>
            </table>
        </div>
    </div>



    </body>

    </html>